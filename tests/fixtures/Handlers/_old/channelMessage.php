<?php declare(strict_types = 1);

use FastyBird\DevicesNode;
use Nette\Utils;

return [
	'messageWithoutUpdate'                   => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'channel' => 'channel-one',
		]),
		0,
		[],
	],
	'messageWithUpdate'                      => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'channel' => 'channel-one',
			'name'    => 'Name from message bus',
		]),
		1,
		[
			'fb.bus.node.entity.updated.channel' => [
				'id'      => '17c59dfa-2edd-438e-8c49-faa4e38e5a5e',
				'name'    => 'Name from message bus',
				'comment' => null,
				'control' => ['configure'],
				'params'  => [],
				'device'  => 'first-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
				'channel' => 'channel-one',
			],
		],
	],
	'messageWithMultiRowUpdate'              => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'channel' => 'channel-one',
			'name'    => 'Name from message bus',
		]),
		1,
		[
			'fb.bus.node.entity.updated.channel' => [
				'id'      => '17c59dfa-2edd-438e-8c49-faa4e38e5a5e',
				'name'    => 'Name from message bus',
				'comment' => null,
				'control' => ['configure'],
				'params'  => [],
				'device'  => 'first-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
				'channel' => 'channel-one',
			],
		],
	],
	'messageWithMultiRowUpdateAndProperties' => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'     => 'first-device',
			'parent'     => null,
			'channel'    => 'channel-one',
			'name'       => 'Name from message bus',
			'properties' => ['switch', 'button'],
		]),
		2,
		[
			'fb.bus.node.entity.updated.channel'          => [
				'id'      => '17c59dfa-2edd-438e-8c49-faa4e38e5a5e',
				'name'    => 'Name from message bus',
				'comment' => null,
				'control' => ['configure'],
				'params'  => [],
				'device'  => 'first-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
				'channel' => 'channel-one',
			],
			'fb.bus.node.entity.created.channel.property' => [
				'property'  => 'button',
				'name'      => null,
				'settable'  => false,
				'queryable' => false,
				'datatype'  => null,
				'unit'      => null,
				'format'    => null,
				'device'    => 'first-device',
				'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'    => null,
				'channel'   => 'channel-one',
				'value'     => null,
				'expected'  => null,
				'pending'   => false,
			],
		],
	],
	'messageWithAddedProperty'               => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'     => 'first-device',
			'parent'     => null,
			'channel'    => 'channel-one',
			'properties' => ['switch', 'button'],
		]),
		1,
		[
			'fb.bus.node.entity.created.channel.property' => [
				'property'  => 'button',
				'name'      => null,
				'settable'  => false,
				'queryable' => false,
				'datatype'  => null,
				'unit'      => null,
				'format'    => null,
				'device'    => 'first-device',
				'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'    => null,
				'channel'   => 'channel-one',
				'value'     => null,
				'expected'  => null,
				'pending'   => false,
			],
		],
	],
	'messageWithRemovedProperty'             => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'     => 'first-device',
			'parent'     => null,
			'channel'    => 'channel-one',
			'properties' => [],
		]),
		1,
		[
			'fb.bus.node.entity.deleted.channel.property' => [
				'value'     => null,
				'expected'  => null,
				'pending'   => false,
				'id'        => 'bbcccf8c-33ab-431b-a795-d7bb38b6b6db',
				'property'  => 'switch',
				'name'      => 'switch',
				'settable'  => true,
				'queryable' => true,
				'datatype'  => 'enum',
				'unit'      => null,
				'format'    => ['on', 'off', 'toggle'],
				'device'    => 'first-device',
				'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'    => null,
				'channel'   => 'channel-one',
			],
		],
	],
	'messageWithCreateControl'               => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'second-device',
			'parent'  => null,
			'channel' => 'channel-one',
			'control' => ['configure'],
		]),
		1,
		[
			'fb.bus.node.entity.updated.channel' => [
				'id'      => 'bbcccf8c-33ab-431b-a795-d7bb38b6b6db',
				'name'    => null,
				'comment' => null,
				'channel' => 'channel-one',
				'control' => ['configure'],
				'params'  => [],
				'device'  => 'second-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
			],
		],
	],
	'messageWithInvalidControl'              => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'channel' => 'channel-one',
			'control' => ['configure', 'reset'],
		]),
		0,
		[],
	],
	'messageWithRemovedControl'              => [
		DevicesNode\Constants::RABBIT_MQ_CHANNELS_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'channel' => 'channel-one',
			'control' => [],
		]),
		5,
		[
			'fb.bus.node.entity.updated.channel'               => [
				'id'      => '17c59dfa-2edd-438e-8c49-faa4e38e5a5e',
				'name'    => 'Channel one',
				'comment' => null,
				'channel' => 'channel-one',
				'control' => [],
				'params'  => [],
				'device'  => 'first-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
			],
			'fb.bus.node.entity.deleted.channel.configuration' => [
				'primaryKey'    => 'configuration',
				'pulse_mode'    => [
					'id'            => '008d911f-e6d4-4b17-aa28-939839581cde',
					'type'          => 'select',
					'configuration' => 'pulse_mode',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'channel'       => 'channel-one',
					'values'        => [
						['name' => 'disabled', 'value' => '0'],
						['name' => 'normally_off', 'value' => '1'],
						['name' => 'normally_on', 'value' => '2'],
					],
				],
				'relay_boot'    => [
					'id'            => '31669d32-8cfa-4a71-bd06-d536a2f94c2c',
					'type'          => 'select',
					'configuration' => 'relay_boot',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'channel'       => 'channel-one',
					'values'        => [
						['name' => 'always_off', 'value' => '0'],
						['name' => 'always_on', 'value' => '1'],
						['name' => 'same_before', 'value' => '2'],
						['name' => 'toggle_before', 'value' => '3'],
					],
				],
				'pulse_time'    => [
					'id'            => '3f83999e-c790-4f42-9e8e-4db749d0e6d4',
					'type'          => 'number',
					'configuration' => 'pulse_time',
					'name'          => null,
					'comment'       => null,
					'default'       => '1',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'channel'       => 'channel-one',
					'min'           => 1.0,
					'max'           => 60.0,
					'step'          => 0.1,
				],
				'on_disconnect' => [
					'id'            => 'c747cfdd-654c-4e50-9715-6d14dbf20552',
					'type'          => 'select',
					'configuration' => 'on_disconnect',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'channel'       => 'channel-one',
					'values'        => [
						['name' => 'no_change', 'value' => '0'],
						['name' => 'turn_off', 'value' => '1'],
						['name' => 'turn_on', 'value' => '2'],
					],
				],
			],
		],
	],
];
