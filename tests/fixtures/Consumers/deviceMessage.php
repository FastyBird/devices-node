<?php declare(strict_types = 1);

use FastyBird\DevicesNode;
use FastyBird\DevicesNode\Types;
use Nette\Utils;

return [
	'messageWithoutUpdate'                   => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device' => 'first-device',
			'parent' => null,
			'name'   => 'First device',
		]),
		0,
		[],
	],
	'messageWithUpdate'                      => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device' => 'first-device',
			'parent' => null,
			'name'   => 'Name from message bus',
		]),
		1,
		[
			'fb.bus.node.entity.updated.device' => [
				'id'         => '69786d15-fd0c-4d9f-9378-33287c2009fa',
				'identifier' => 'first-device',
				'type'       => 'physical',
				'name'       => 'Name from message bus',
				'comment'    => null,
				'state'      => Types\DeviceConnectionState::STATE_INIT,
				'enabled'    => true,
				'control'    => ['configure'],
				'params'     => [],
				'device'     => 'first-device',
				'owner'      => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'     => null,
			],
		],
	],
	'messageWithMultiRowUpdate'              => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'name'    => 'Name from message bus',
			'state'   => Types\DeviceConnectionState::STATE_READY,
			'enabled' => true,
			'control' => ['configure'],
		]),
		1,
		[
			'fb.bus.node.entity.updated.device' => [
				'id'         => '69786d15-fd0c-4d9f-9378-33287c2009fa',
				'identifier' => 'first-device',
				'type'       => 'physical',
				'name'       => 'Name from message bus',
				'comment'    => null,
				'state'      => Types\DeviceConnectionState::STATE_READY,
				'enabled'    => true,
				'control'    => ['configure'],
				'params'     => [],
				'device'     => 'first-device',
				'owner'      => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'     => null,
			],
		],
	],
	'messageWithMultiRowUpdateAndProperties' => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'     => 'first-device',
			'parent'     => null,
			'name'       => 'Name from message bus',
			'state'      => Types\DeviceConnectionState::STATE_READY,
			'properties' => ['uptime', 'rssi', 'led'],
		]),
		2,
		[
			'fb.bus.node.entity.updated.device'          => [
				'id'         => '69786d15-fd0c-4d9f-9378-33287c2009fa',
				'identifier' => 'first-device',
				'type'       => 'physical',
				'name'       => 'Name from message bus',
				'comment'    => null,
				'state'      => Types\DeviceConnectionState::STATE_READY,
				'enabled'    => true,
				'control'    => ['configure'],
				'params'     => [],
				'device'     => 'first-device',
				'owner'      => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'     => null,
			],
			'fb.bus.node.entity.created.device.property' => [
				'property'  => 'led',
				'name'      => null,
				'settable'  => false,
				'queryable' => false,
				'datatype'  => null,
				'unit'      => null,
				'format'    => null,
				'device'    => 'first-device',
				'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'    => null,
				'value'     => null,
				'expected'  => null,
				'pending'   => false,
			],
		],
	],
	'messageWithAddedProperty'               => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'     => 'first-device',
			'parent'     => null,
			'properties' => ['uptime', 'rssi', 'led'],
		]),
		1,
		[
			'fb.bus.node.entity.created.device.property' => [
				'property'  => 'led',
				'name'      => null,
				'settable'  => false,
				'queryable' => false,
				'datatype'  => null,
				'unit'      => null,
				'format'    => null,
				'device'    => 'first-device',
				'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'    => null,
				'value'     => null,
				'expected'  => null,
				'pending'   => false,
			],
		],
	],
	'messageWithRemovedProperty'             => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'     => 'first-device',
			'parent'     => null,
			'properties' => ['uptime'],
		]),
		1,
		[
			'fb.bus.node.entity.deleted.device.property' => [
				'value'     => null,
				'expected'  => null,
				'pending'   => false,
				'id'        => '28bc0d38-2f7c-4a71-aa74-27b102f8df4c',
				'property'  => 'rssi',
				'name'      => 'rssi',
				'settable'  => false,
				'queryable' => true,
				'datatype'  => 'integer',
				'unit'      => null,
				'format'    => null,
				'device'    => 'first-device',
				'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'    => null,
			],
		],
	],
	'messageWithMultiUpdateAndChannels'      => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'   => 'first-device',
			'parent'   => null,
			'name'     => 'Name from message bus',
			'state'    => Types\DeviceConnectionState::STATE_READY,
			'channels' => ['channel-one', 'channel-two', 'channel-three'],
		]),
		2,
		[
			'fb.bus.node.entity.updated.device'  => [
				'id'         => '69786d15-fd0c-4d9f-9378-33287c2009fa',
				'identifier' => 'first-device',
				'type'       => 'physical',
				'name'       => 'Name from message bus',
				'comment'    => null,
				'state'      => Types\DeviceConnectionState::STATE_READY,
				'enabled'    => true,
				'control'    => ['configure'],
				'params'     => [],
				'device'     => 'first-device',
				'owner'      => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'     => null,
			],
			'fb.bus.node.entity.created.channel' => [
				'name'    => null,
				'comment' => null,
				'channel' => 'channel-three',
				'control' => [],
				'params'  => [],
				'device'  => 'first-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
			],
		],
	],
	'messageWithAddedChannel'                => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'   => 'first-device',
			'parent'   => null,
			'channels' => ['channel-one', 'channel-two', 'channel-three'],
		]),
		1,
		[
			'fb.bus.node.entity.created.channel' => [
				'name'    => null,
				'comment' => null,
				'channel' => 'channel-three',
				'control' => [],
				'params'  => [],
				'device'  => 'first-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
			],
		],
	],
	'messageWithRemovedChannel'              => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'   => 'first-device',
			'parent'   => null,
			'channels' => ['channel-one'],
		]),
		6,
		[
			'fb.bus.node.entity.deleted.channel'               => [
				'id'      => '6821f8e9-ae69-4d5c-9b7c-d2b213f1ae0a',
				'name'    => 'Channel two',
				'comment' => null,
				'channel' => 'channel-two',
				'control' => ['configure'],
				'params'  => [],
				'device'  => 'first-device',
				'owner'   => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'  => null,
			],
			'fb.bus.node.entity.deleted.channel.property'      => [
				'primaryKey'  => 'property',
				'humidity'    => [
					'value'     => null,
					'expected'  => null,
					'pending'   => false,
					'id'        => '24c436f4-a2e4-4d2b-b910-1a3ff785b784',
					'property'  => 'humidity',
					'name'      => 'humidity',
					'settable'  => false,
					'queryable' => true,
					'datatype'  => 'float',
					'unit'      => '%',
					'format'    => null,
					'device'    => 'first-device',
					'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'    => null,
					'channel'   => 'channel-two',
				],
				'temperature' => [
					'value'     => null,
					'expected'  => null,
					'pending'   => false,
					'id'        => '28bc0d38-2f7c-4a71-aa74-27b102f8df4c',
					'property'  => 'temperature',
					'name'      => 'temperature',
					'settable'  => false,
					'queryable' => true,
					'datatype'  => 'float',
					'unit'      => 'Â°C',
					'format'    => null,
					'device'    => 'first-device',
					'owner'     => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'    => null,
					'channel'   => 'channel-two',
				],
			],
			'fb.bus.node.entity.deleted.channel.configuration' => [
				'primaryKey'    => 'configuration',
				'pulse_mode'    => [
					'id'            => '1fa8e5ac-d2fb-4531-ba64-3c69863aeea3',
					'type'          => 'select',
					'configuration' => 'pulse_mode',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'channel'       => 'channel-two',
					'values'        => [
						['name' => 'disabled', 'value' => '0'],
						['name' => 'normally_off', 'value' => '1'],
						['name' => 'normally_on', 'value' => '2'],
					],
				],
				'on_disconnect' => [
					'id'            => '3134ba8e-f134-4bf2-9c80-c977c4deb0fb',
					'type'          => 'select',
					'configuration' => 'on_disconnect',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'channel'       => 'channel-two',
					'values'        => [
						['name' => 'no_change', 'value' => '0'],
						['name' => 'turn_off', 'value' => '1'],
						['name' => 'turn_on', 'value' => '2'],
					],
				],
				'relay_boot'    => [
					'id'            => 'd8b0d2b4-a47a-4750-a225-ddfa973675d3',
					'type'          => 'select',
					'configuration' => 'relay_boot',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'channel'       => 'channel-two',
					'values'        => [
						['name' => 'always_off', 'value' => '0'],
						['name' => 'always_on', 'value' => '1'],
						['name' => 'same_before', 'value' => '2'],
						['name' => 'toggle_before', 'value' => '3'],
					],
				],
			],
		],
	],
	'messageWithAddedControl'                => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'control' => ['configure', 'reset'],
		]),
		1,
		[
			'fb.bus.node.entity.updated.device' => [
				'id'         => '69786d15-fd0c-4d9f-9378-33287c2009fa',
				'identifier' => 'first-device',
				'type'       => 'physical',
				'name'       => 'First device',
				'comment'    => null,
				'state'      => Types\DeviceConnectionState::STATE_INIT,
				'enabled'    => true,
				'control'    => ['configure', 'reset'],
				'params'     => [],
				'device'     => 'first-device',
				'owner'      => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'     => null,
			],
		],
	],
	'messageWithRemovedControl'              => [
		DevicesNode\Constants::RABBIT_MQ_DEVICES_DATA_ROUTING_KEY,
		Utils\ArrayHash::from([
			'device'  => 'first-device',
			'parent'  => null,
			'control' => [],
		]),
		10,
		[
			'fb.bus.node.entity.updated.device'               => [
				'id'         => '69786d15-fd0c-4d9f-9378-33287c2009fa',
				'identifier' => 'first-device',
				'type'       => 'physical',
				'name'       => 'First device',
				'comment'    => null,
				'state'      => Types\DeviceConnectionState::STATE_INIT,
				'enabled'    => true,
				'control'    => [],
				'params'     => [],
				'device'     => 'first-device',
				'owner'      => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
				'parent'     => null,
			],
			'fb.bus.node.entity.deleted.device.configuration' => [
				'primaryKey'              => 'configuration',
				'sensor_expected_power'   => [
					'id'            => '138c6cfc-ed49-476b-9f1e-6ee1dcb24f0b',
					'type'          => 'number',
					'configuration' => 'sensor_expected_power',
					'name'          => null,
					'comment'       => null,
					'default'       => null,
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'min'           => 0.0,
					'max'           => 500.0,
					'step'          => 1.0,
				],
				'btn_delay'               => [
					'id'            => '19eb2b65-abce-4061-b591-4ff1a4b1500f',
					'type'          => 'number',
					'configuration' => 'btn_delay',
					'name'          => null,
					'comment'       => null,
					'default'       => '500',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'min'           => 0.0,
					'max'           => 1000.0,
					'step'          => 100.0,
				],
				'sensor_energy_units'     => [
					'id'            => '1b061a97-4d99-4732-9ea5-ea2eb777e970',
					'type'          => 'select',
					'configuration' => 'sensor_energy_units',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'values'        => [
						['name' => 'joules', 'value' => '0'],
						['name' => 'kilowatts_hours', 'value' => '1'],
					],
				],
				'sensor_expected_current' => [
					'id'            => '20fba951-e76d-4d6b-a572-dec02c6d8de8',
					'type'          => 'number',
					'configuration' => 'sensor_expected_current',
					'name'          => null,
					'comment'       => null,
					'default'       => null,
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'min'           => 0.0,
					'max'           => 500.0,
					'step'          => 1.0,
				],
				'sensor_expected_voltage' => [
					'id'            => '3ff0029f-7fe3-405e-a3ef-edaad08e2ffa',
					'type'          => 'number',
					'configuration' => 'sensor_expected_voltage',
					'name'          => null,
					'comment'       => null,
					'default'       => null,
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'min'           => 0.0,
					'max'           => 500.0,
					'step'          => 1.0,
				],
				'sensor_save_interval'    => [
					'id'            => '4897727b-b74e-47ae-a0e7-953c8f3e4f06',
					'type'          => 'number',
					'configuration' => 'sensor_save_interval',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'min'           => 0.0,
					'max'           => 200.0,
					'step'          => 1.0,
				],
				'sensor_read_interval'    => [
					'id'            => '81bdf07b-7dc9-4e3a-98b1-4dc5e9f16b55',
					'type'          => 'select',
					'configuration' => 'sensor_read_interval',
					'name'          => null,
					'comment'       => null,
					'default'       => '6',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'values'        => [
						['name' => '1', 'value' => '1'],
						['name' => '6', 'value' => '6'],
						['name' => '10', 'value' => '10'],
						['name' => '15', 'value' => '15'],
						['name' => '30', 'value' => '30'],
						['name' => '60', 'value' => '60'],
						['name' => '300', 'value' => '300'],
						['name' => '600', 'value' => '600'],
						['name' => '900', 'value' => '900'],
						['name' => '1800', 'value' => '1800'],
						['name' => '3600', 'value' => '3600'],
					],
				],
				'sensor_report_interval'  => [
					'id'            => '8a41d824-b1db-4548-b07e-606117dd7309',
					'type'          => 'number',
					'configuration' => 'sensor_report_interval',
					'name'          => null,
					'comment'       => null,
					'default'       => '10',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'min'           => 1.0,
					'max'           => 60.0,
					'step'          => 1.0,
				],
				'sensor_power_units'      => [
					'id'            => '8d933e4c-1fc9-4361-ba09-eebee4592776',
					'type'          => 'select',
					'configuration' => 'sensor_power_units',
					'name'          => null,
					'comment'       => null,
					'default'       => '0',
					'value'         => null,
					'device'        => 'first-device',
					'owner'         => '455354e8-96bd-4c29-84e7-9f10e1d4db4b',
					'parent'        => null,
					'values'        => [
						['name' => 'watts', 'value' => '0'],
						['name' => 'kilowatts', 'value' => '1'],
					],
				],
			],
		],
	],
];
